# ğŸš€ æƒ…å¢ƒå¤šè‡‚è€è™æœºç­–ç•¥é€‰æ‹©ç³»ç»Ÿ

## ğŸ“‹ **ç³»ç»Ÿæ¦‚è¿°**

åŸºäºæƒ…å¢ƒçš„å¤šè‡‚è€è™æœºç­–ç•¥é€‰æ‹©ç³»ç»Ÿï¼Œé›†æˆåˆ°ç°æœ‰çš„MultiAgentOrchestratorWithToolsä¸­ï¼Œé€šè¿‡Thompsoné‡‡æ ·æˆ–LinUCBç®—æ³•æ™ºèƒ½é€‰æ‹©æœ€ä¼˜äº¤æ˜“ç­–ç•¥ã€‚

## ğŸ—ï¸ **ç³»ç»Ÿæ¶æ„**

### **æ ¸å¿ƒç»„ä»¶**
1. **ç­–ç•¥åŸºç¡€åè®®** (`strategies/base.py`) - ç»Ÿä¸€ç­–ç•¥æ¥å£
2. **é€šç”¨ä¸­é—´ä»¶** (`strategies/middleware.py`) - æ³¢åŠ¨ç‡ç›®æ ‡ã€æ­¢ç›ˆæ­¢æŸã€æˆæœ¬æ»‘ç‚¹
3. **ç­–ç•¥åº“** (`strategies/library.py`) - æ³¨å†Œå’Œç®¡ç†10ä¸ªç­–ç•¥
4. **æƒ…å¢ƒç‰¹å¾æ„å»º** (`selector/context_features.py`) - æ„é€ regimeç‰¹å¾
5. **Thompsoné‡‡æ ·é€‰æ‹©å™¨** (`selector/thompson_selector.py`) - é»˜è®¤é€‰æ‹©å™¨
6. **ä¸¥æ ¼è¯„ä¼°æ¡†æ¶** (`agents/strategy_evaluator.py`) - Walk-forward + Bootstrap
7. **é€‰æ‹©å™¨è®­ç»ƒå™¨** (`agents/strategy_optimizer.py`) - ç¦»çº¿è®­ç»ƒå’Œåœ¨çº¿æ›´æ–°
8. **LLMè§£é‡Šå™¨** (`reporting/explain_llm.py`) - ç”Ÿæˆä¸­è‹±åŒè¯­äº¤æ˜“è§£é‡Š

### **é›†æˆæ–¹å¼**
- ä¸æ”¹å˜MultiAgentOrchestratorWithToolså¯¹å¤–æ¥å£
- æ–°å¢`bandit_select_strategy` function tool
- GPTå…ˆè°ƒç”¨é€‰æ‹©å™¨è·å–æ¨èç­–ç•¥ï¼Œå†æµ‹è¯•å€™é€‰ç­–ç•¥
- æ‰€æœ‰ä»£ç é¿å…look-aheadï¼Œç´¢å¼•å¯¹é½

## ğŸš€ **å¿«é€Ÿå¼€å§‹**

### **1. è®­ç»ƒé€‰æ‹©å™¨**
```bash
# è®­ç»ƒThompsoné‡‡æ ·é€‰æ‹©å™¨
python agents/strategy_optimizer.py \
  --train-start 2022-01-01 \
  --train-end 2024-06-30 \
  --selector thompson \
  --topk 1 \
  --save artifacts/selector_state.pkl
```

### **2. ä¸¥æ ¼è¯„ä¼°**
```bash
# è¯„ä¼°é€‰æ‹©å™¨æ€§èƒ½
python agents/strategy_evaluator.py \
  --asset BTC \
  --start 2022-01-01 \
  --end 2024-12-31 \
  --wf-train 180 \
  --wf-test 30 \
  --use-selector true \
  --topk 1 \
  --fee-bps 5 \
  --slip-k 0.1 \
  --target-vol 0.15 \
  --tp 0.02 \
  --sl 0.01
```

### **3. æ­£å¸¸è¿è¡Œ**
```bash
# å¤šæ™ºèƒ½ä½“ç³»ç»Ÿï¼ˆGPTä¼šå…ˆè°ƒç”¨bandit_select_strategyï¼‰
python run_multi_agent.py
```

## ğŸ“Š **ç³»ç»Ÿå·¥ä½œæµç¨‹**

### **GPTå·¥ä½œæµç¨‹**
1. **ç­–ç•¥é€‰æ‹©**: è°ƒç”¨`bandit_select_strategy(asset)`è·å–æ¨èç­–ç•¥
2. **ç­–ç•¥éªŒè¯**: ä»…å¯¹æ¨èç­–ç•¥è°ƒç”¨ç°æœ‰ç­–ç•¥å·¥å…·
3. **ç»„åˆæŠ•èµ„**: åŸºäºé€‰æ‹©å™¨æ¨èå’Œé£é™©é¢„ç®—æ„å»ºæŠ•èµ„ç»„åˆ

### **é€‰æ‹©å™¨å·¥ä½œæµç¨‹**
1. **ç‰¹å¾æå–**: ä»ä»·æ ¼åºåˆ—æ„å»º50+æŠ€æœ¯æŒ‡æ ‡ç‰¹å¾
2. **æƒ…å¢ƒåˆ†æ**: è¯†åˆ«å¸‚åœºregimeï¼ˆè¶‹åŠ¿ã€æ³¢åŠ¨ã€æƒ…ç»ªç­‰ï¼‰
3. **ç­–ç•¥æ¨è**: åŸºäºThompsoné‡‡æ ·è¿”å›top-kç­–ç•¥
4. **åœ¨çº¿å­¦ä¹ **: æ ¹æ®äº¤æ˜“ç»“æœæ›´æ–°åéªŒåˆ†å¸ƒ

## ğŸ”§ **é…ç½®å‚æ•°**

### **é€‰æ‹©å™¨é…ç½®**
```python
ThompsonSelectorConfig(
    n_arms=10,           # ç­–ç•¥æ•°é‡
    n_features=50,       # ç‰¹å¾ç»´åº¦
    alpha=1.0,           # å™ªå£°å‚æ•°
    beta=1.0,            # æ­£åˆ™åŒ–å‚æ•°
    warmup_samples=100   # é¢„çƒ­æ ·æœ¬æ•°
)
```

### **è¯„ä¼°é…ç½®**
```python
EvaluationConfig(
    wf_train_days=180,   # è®­ç»ƒæœŸå¤©æ•°
    wf_test_days=30,     # æµ‹è¯•æœŸå¤©æ•°
    fee_bps=5.0,         # æ‰‹ç»­è´¹(åŸºç‚¹)
    slip_k=0.1,          # æ»‘ç‚¹ç³»æ•°
    target_vol=0.15,     # ç›®æ ‡æ³¢åŠ¨ç‡
    bootstrap_samples=1000  # Bootstrapæ ·æœ¬æ•°
)
```

## ğŸ“ˆ **è¯„ä¼°æŒ‡æ ‡**

### **æ ¸å¿ƒæŒ‡æ ‡**
- **CAGR**: å¹´åŒ–å¤åˆå¢é•¿ç‡
- **Sharpe Ratio**: å¤æ™®æ¯”ç‡
- **Sortino Ratio**: ç´¢æè¯ºæ¯”ç‡
- **Calmar Ratio**: å¡ç›æ¯”ç‡
- **Max Drawdown**: æœ€å¤§å›æ’¤
- **Profit Factor**: ç›ˆäºæ¯”
- **Hit Rate**: èƒœç‡

### **é«˜çº§æŒ‡æ ‡**
- **CVaR(0.95)**: æ¡ä»¶é£é™©ä»·å€¼
- **Recovery Time**: æ¢å¤æ—¶é—´
- **Turnover**: æ¢æ‰‹ç‡
- **Bootstrapç½®ä¿¡åŒºé—´**: ç»Ÿè®¡æ˜¾è‘—æ€§

## ğŸ¯ **åŸºå‡†å¯¹æ¯”**

### **åŸºå‡†ç­–ç•¥**
1. **Buy & Hold**: ä¹°å…¥æŒæœ‰
2. **Equal Weight**: ç­‰æƒé‡ç»„åˆ
3. **Best Single Strategy**: æœ€ä½³å•ç­–ç•¥

### **è¯„ä¼°æ–¹æ³•**
- **Walk-forward**: æ»šåŠ¨è®­ç»ƒ-æµ‹è¯•
- **æˆæœ¬è€ƒè™‘**: æ‰‹ç»­è´¹å’Œæ»‘ç‚¹
- **Bootstrap**: ç½®ä¿¡åŒºé—´
- **å¤šèµ„äº§**: è·¨èµ„äº§éªŒè¯

## ğŸ“Š **é¢„æœŸæ•ˆæœ**

### **æ€§èƒ½æå‡**
- **Sharpe Ratio**: ä»1.0æå‡åˆ°1.5+
- **Sortino Ratio**: ä»1.2æå‡åˆ°1.8+
- **Calmar Ratio**: ä»0.8æå‡åˆ°1.2+
- **Max Drawdown**: æ§åˆ¶åœ¨10%ä»¥å†…

### **é€‰æ‹©å™¨ä¼˜åŠ¿**
- **æƒ…å¢ƒæ„ŸçŸ¥**: æ ¹æ®å¸‚åœºç¯å¢ƒé€‰æ‹©ç­–ç•¥
- **åœ¨çº¿å­¦ä¹ **: æŒç»­ä¼˜åŒ–ç­–ç•¥é€‰æ‹©
- **é£é™©æ§åˆ¶**: å¹³è¡¡æ¢ç´¢å’Œåˆ©ç”¨
- **å¯è§£é‡Šæ€§**: æä¾›å†³ç­–æ¨ç†

## ğŸ› ï¸ **æŠ€æœ¯å®ç°**

### **æ–‡ä»¶ç»“æ„**
```
strategies/
â”œâ”€â”€ base.py              # ç­–ç•¥åŸºç¡€åè®®
â”œâ”€â”€ middleware.py         # é€šç”¨ä¸­é—´ä»¶
â””â”€â”€ library.py           # ç­–ç•¥åº“

selector/
â”œâ”€â”€ context_features.py   # æƒ…å¢ƒç‰¹å¾æ„å»º
â””â”€â”€ thompson_selector.py # Thompsoné‡‡æ ·é€‰æ‹©å™¨

agents/
â”œâ”€â”€ strategy_evaluator.py # ä¸¥æ ¼è¯„ä¼°æ¡†æ¶
â””â”€â”€ strategy_optimizer.py # é€‰æ‹©å™¨è®­ç»ƒå™¨

reporting/
â””â”€â”€ explain_llm.py       # LLMè§£é‡Šå™¨
```

### **å…³é”®ç‰¹æ€§**
- **æ— Look-ahead**: ä¸¥æ ¼é¿å…æœªæ¥ä¿¡æ¯æ³„éœ²
- **ç´¢å¼•å¯¹é½**: ç¡®ä¿æ—¶é—´åºåˆ—ä¸€è‡´æ€§
- **çŠ¶æ€æŒä¹…åŒ–**: ä¿å­˜/åŠ è½½é€‰æ‹©å™¨çŠ¶æ€
- **å¯é…ç½®æ€§**: æ”¯æŒå‚æ•°è°ƒä¼˜

## ğŸ” **éªŒæ”¶æ ‡å‡†**

### **åŠŸèƒ½éªŒæ”¶**
1. **GPTå·¥ä½œæµç¨‹**: å…ˆè°ƒç”¨`bandit_select_strategy`ï¼Œå†è°ƒç”¨ç­–ç•¥å·¥å…·
2. **é€‰æ‹©å™¨æ€§èƒ½**: åœ¨Sharpe/Sortino/Calmar/MDDä¸Šä¼˜äºåŸºå‡†
3. **çŠ¶æ€ç®¡ç†**: `artifacts/selector_state.pkl`èƒ½ä¿å­˜/åŠ è½½
4. **æŠ¥å‘Šç”Ÿæˆ**: æ¸…æ™°çš„markdownæŠ¥å‘Šå’Œå›¾è¡¨

### **æ€§èƒ½éªŒæ”¶**
1. **é€‰æ‹©å™¨æ–¹æ¡ˆ**: ä¼˜äºBuy&Holdã€ç­‰æƒé‡ã€æœ€ä½³å•ç­–ç•¥
2. **ç»Ÿè®¡æ˜¾è‘—æ€§**: Bootstrapç½®ä¿¡åŒºé—´æ”¯æŒ
3. **æˆæœ¬è€ƒè™‘**: åŒ…å«æ‰‹ç»­è´¹å’Œæ»‘ç‚¹
4. **å¤šèµ„äº§éªŒè¯**: è·¨èµ„äº§ç¨³å®šæ€§

## ğŸš€ **è¿è¡ŒæŒ‡ä»¤**

### **å®Œæ•´æµç¨‹**
```bash
# 1. è®­ç»ƒé€‰æ‹©å™¨
python agents/strategy_optimizer.py \
  --train-start 2022-01-01 \
  --train-end 2024-06-30 \
  --selector thompson \
  --topk 1

# 2. ä¸¥æ ¼è¯„ä¼°
python agents/strategy_evaluator.py \
  --asset BTC \
  --start 2022-01-01 \
  --end 2024-12-31 \
  --wf-train 180 \
  --wf-test 30 \
  --use-selector true \
  --topk 1

# 3. æ­£å¸¸è¿è¡Œ
python run_multi_agent.py
```

### **é¢„æœŸè¾“å‡º**
- **é€‰æ‹©å™¨çŠ¶æ€**: `artifacts/selector_state.pkl`
- **è¯„ä¼°æŠ¥å‘Š**: `reports/strategy_evaluation_*.md`
- **äº¤æ˜“è§£é‡Š**: `reports/trade_explanation_*.json`
- **æ±‡æ€»æŠ¥å‘Š**: `reports/trading_summary_*.md`

## ğŸ‰ **ç³»ç»Ÿä¼˜åŠ¿**

### **æŠ€æœ¯ä¼˜åŠ¿**
1. **æƒ…å¢ƒæ„ŸçŸ¥**: åŸºäºå¸‚åœºregimeæ™ºèƒ½é€‰æ‹©ç­–ç•¥
2. **åœ¨çº¿å­¦ä¹ **: æŒç»­ä¼˜åŒ–ç­–ç•¥é€‰æ‹©
3. **é£é™©æ§åˆ¶**: å¹³è¡¡æ¢ç´¢å’Œåˆ©ç”¨
4. **å¯è§£é‡Šæ€§**: æä¾›å†³ç­–æ¨ç†

### **ä¸šåŠ¡ä¼˜åŠ¿**
1. **æ€§èƒ½æå‡**: æ˜¾è‘—ä¼˜äºåŸºå‡†ç­–ç•¥
2. **é£é™©æ§åˆ¶**: æœ‰æ•ˆæ§åˆ¶å›æ’¤
3. **é€‚åº”æ€§**: é€‚åº”ä¸åŒå¸‚åœºç¯å¢ƒ
4. **å¯æ‰©å±•**: æ˜“äºæ·»åŠ æ–°ç­–ç•¥

**ç°åœ¨å¼€å§‹ä½¿ç”¨æƒ…å¢ƒå¤šè‡‚è€è™æœºç­–ç•¥é€‰æ‹©ç³»ç»Ÿï¼Œè®©AIäº¤æ˜“æ›´æ™ºèƒ½ï¼** ğŸš€
